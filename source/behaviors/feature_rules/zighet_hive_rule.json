//bridge-file-version: #0
{
	"format_version": "1.13.0",
	"minecraft:feature_rules": {
		"description": {
			"identifier": "zalcyan:zighet_hive_rule",
			"places_feature": "zalcyan:zighet_hive_aggragate"
		},
		"conditions": {
			"minecraft:biome_filter": {
				"all_of": [
					{
						"any_of": [
							{
								"test": "has_biome_tag",
								"operator": "==",
								"value": "monster"
							}
						]
					},
					{
						"none_of": [
							{
								"test": "has_biome_tag",
								"operator": "==",
								"value": "ocean"
							}
						]
					}
				]
			},
			"placement_pass": "final_pass"
		},
		"distribution": {
			"iterations": "
				v.tile.chunk_size = 70;

				v.tile.origin.x = (16 * v.tile.chunk_size) * math.floor(v.originx / (16 * v.tile.chunk_size));
				v.tile.origin.z = (16 * v.tile.chunk_size) * math.floor(v.originz / (16 * v.tile.chunk_size));

				v.tile.current_chunk.x = math.mod(math.floor(v.originx / 16), v.tile.chunk_size);
				v.tile.current_chunk.x < 0 ? {
					v.tile.current_chunk.x = v.tile.current_chunk.x + v.tile.chunk_size;
				};
				v.tile.current_chunk.z = math.mod(math.floor(v.originz / 16), v.tile.chunk_size);
				v.tile.current_chunk.z < 0 ? {
					v.tile.current_chunk.z = v.tile.current_chunk.z + v.tile.chunk_size;
				};

				v.tile.target_chunk.x =
					math.floor(
						(v.tile.chunk_size / 2)
						+ (v.tile.chunk_size / 2)
							* query.noise(v.tile.origin.x - 12, v.tile.origin.z - 12)
					)
				;
				v.tile.target_chunk.z =
					math.floor(
						(v.tile.chunk_size / 2)
						+ (v.tile.chunk_size / 2)
							* query.noise(v.tile.origin.x + 12, v.tile.origin.z + 12)
					)
				;

				return
					v.tile.current_chunk.x == v.tile.target_chunk.x
					&& v.tile.current_chunk.z == v.tile.target_chunk.z
				;
			",
			"y": "(q.heightmap(v.worldx, v.worldz))",
			"x": 0,
			"z": 0
		}
	}
}